{% extends "base.html" %}

{% block main %}
<div class="mx-auto" style="max-width: 50rem;">
  <h2 class="my-4">{% if update %}Редактировать статью{% else %}Создать статью{% endif %}</h2>
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div>{{ form.non_field_errors }}</div>

    <div class="form-group pb-3">
      Заголовок:
      <input type="text" class="form-control {% if form.title.errors %}is-invalid{% endif %}" id="id_title"
        name="title" value='{{ form.title.value|default:"" }}'>
      {% if form.title.errors %}
      <div class="invalid-feedback">{{ form.title.errors }}</div>
      {% endif %}
    </div>

    <div class="form-group pb-3">
      Текст:
      <textarea type="text" class="form-control {% if form.content.errors %}is-invalid{% endif %}" id="id_content"
        name="content" cols="40" rows="10">{{ form.content.value|default:"" }}</textarea>
      {% if form.content.errors %}
      <div class="invalid-feedback">{{ form.content.errors }}</div>
      {% endif %}
    </div>

    {# TODO checkboxes #}
    <div class="form-group pb-3">
      Теги <span class="text-muted">(зажмите <code>Ctrl</code>, чтобы выбрать несколько)</span>:<br>
      <select class="custom-select w-25" name="tags" id="id_tags" multiple>
        {% for name, value in form.tags.field.choices %}
        <option value="{{ name }}">{{ value }}</option>
        {% endfor %}
      </select>
      {% if form.tags.errors %}
      <div class="invalid-feedback">{{ form.tags.errors }}</div>
      {% endif %}
    </div>

    <div class="form-group pb-3">
      Категория:<br>
      <select class="custom-select w-25" name="category" id="id_category">
        {% for name, value in form.category.field.choices %}
        <option value="{{ name }}">{{ value }}</option>
        {% endfor %}
      </select>
      {% if form.category.errors %}
      <div class="invalid-feedback">{{ form.category.errors }}</div>
      {% endif %}
    </div>

    <button type="submit" class="btn btn-primary">
      {% if update %}Обновить{% else %}Создать{% endif %}
    </button>
  </form>
</div>

{% endblock main %}
