{% extends "base_with_navigation.html" %}

{% block title %}
Новости спорта
{% endblock %}

{% block navigation %}
{% include './components/category_navigation.html' %}
{% endblock navigation %}

{% block content %}
<div class="row pb-4">
	{% if article.author.user == user %}
	<div class="mx-auto pb-3 d-flex gap-2" style="max-width: 50rem;">
		<a href="{% url "sports_news_app:update-article" article.slug %}" class="btn btn-primary">Редактировать</a>
		<a href="#" class="btn btn-danger">Удалить</a>
	</div>

	<hr class="hr mx-auto" style="max-width: 50rem;">
	{% endif %}


	{% if is_not_published %}
	<div class="mx-auto alert alert-warning" style="max-width: 50rem;">Статус: {{ article.get_status_display }}</div>
	{% endif %}

	<h3 class="text-center pb-3">{{ article.title }}</h3>

	<div class="mx-auto" style="max-width: 50rem;">

		{# TODO article.context should probably contain html instead of raw text #}
		<div class="fs-5 pb-3">{{ article.content }}</div>

		{% if article.author %}
		<small class="text-muted pb-2">{{ article.author }}, {{ article.created_on|date:"F d, Y" }}</small>
		{% else %}
		<small class="text-muted pb-2">{{ article.created_on|date:"F d, Y" }}</small>
		{% endif %}
	</div>

</div>

<hr class="hr mx-auto" style="max-width: 50rem;">

<div class="mx-auto" style="max-width: 50rem;">
	<h5>Комментарии &nbsp;&nbsp;<span class="text-primary">{{ comments.count }}</span></h5>

	{% if comments %}

		{% for comment in comments %}
			{% include './components/comment.html' %}
		{% endfor %}

	{% else %}
		<p class="text-muted"><i>Комментариев пока нет!</i></p>
	{% endif %}
</div>

{% endblock content %}
